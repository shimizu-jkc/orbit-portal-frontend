(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{302:function(t,a,r){"use strict";r.r(a);var e=r(9),s=Object(e.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"監査ログの記録と収集"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#監査ログの記録と収集"}},[t._v("#")]),t._v(" 監査ログの記録と収集")]),t._v(" "),r("p",[t._v("クラウドを利用したサービスにおいて、監査ログを記録することは非常に重要です。")]),t._v(" "),r("p",[t._v("「いつ」「誰が」「何を」操作したかを記録することで、利用状況や不正アクセスの有無を把握し、情報漏洩といったこと故が発生した際の正確な検知を可能にします。また、事後対応の施策として活用するだけでなく、兆候をつかむことで予防にも役立ちます。")]),t._v(" "),r("p",[t._v("OrBITでは、監査ログを記録・収集する仕組みを備えたAWSアカウントを提供します。")]),t._v(" "),r("p"),r("div",{staticClass:"table-of-contents"},[r("ul",[r("li",[r("a",{attrs:{href:"#利用するawsサービス"}},[t._v("利用するAWSサービス")])]),r("li",[r("a",{attrs:{href:"#ログ種別"}},[t._v("ログ種別")])]),r("li",[r("a",{attrs:{href:"#アーキテクチャ"}},[t._v("アーキテクチャ")])]),r("li",[r("a",{attrs:{href:"#操作ログの確認と解析"}},[t._v("操作ログの確認と解析")])]),r("li",[r("a",{attrs:{href:"#構成変更ログの確認と解析"}},[t._v("構成変更ログの確認と解析")])]),r("li",[r("a",{attrs:{href:"#ログの収集"}},[t._v("ログの収集")]),r("ul",[r("li",[r("a",{attrs:{href:"#管理ポリシー"}},[t._v("管理ポリシー")])]),r("li",[r("a",{attrs:{href:"#解析依頼"}},[t._v("解析依頼")])])])]),r("li",[r("a",{attrs:{href:"#チュートリアル"}},[t._v("チュートリアル")]),r("ul",[r("li",[r("a",{attrs:{href:"#aws-cloudtrailコンソールを使用して操作ログを確認する"}},[t._v("AWS CloudTrailコンソールを使用して操作ログを確認する")])]),r("li",[r("a",{attrs:{href:"#cloudwatchlogs-insightsを使用して操作ログを解析する"}},[t._v("CloudWatchLogs Insightsを使用して操作ログを解析する")])]),r("li",[r("a",{attrs:{href:"#configコンソールを使用して構成変更ログを確認する"}},[t._v("Configコンソールを使用して構成変更ログを確認する")])]),r("li",[r("a",{attrs:{href:"#configコンソールを使用して構成変更ログの詳細を確認する"}},[t._v("Configコンソールを使用して構成変更ログの詳細を確認する")])])])])])]),r("p"),t._v(" "),r("h2",{attrs:{id:"利用するawsサービス"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#利用するawsサービス"}},[t._v("#")]),t._v(" 利用するAWSサービス")]),t._v(" "),r("p",[t._v("AWSアカウント上での監査ログの記録には、以下のサービスを利用します。")]),t._v(" "),r("ul",[r("li",[r("p",[r("em",[r("strong",[t._v("AWS CloudTrail")])])]),t._v(" "),r("p",[t._v("AWSにおけるユーザーの操作イベントを記録するサービスです。"),r("br"),t._v("\nいつ、誰(IAMユーザーやロール、AWSのサービス等)が、どのような作業を行ったのかを記録することで、サービスの運用監査やコンプライアンス、セキュリティなどのリスク管理業務を支援します。")]),t._v(" "),r("p",[t._v("詳細は以下を参照してください。")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://docs.aws.amazon.com/ja_jp/awscloudtrail/latest/userguide/cloudtrail-user-guide.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("「AWS CloudTrail ユーザーガイド」"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://aws.amazon.com/jp/cloudtrail/pricing/",target:"_blank",rel:"noopener noreferrer"}},[t._v("「AWS CloudTrail 料金」"),r("OutboundLink")],1)])])]),t._v(" "),r("li",[r("p",[r("em",[r("strong",[t._v("AWS Config")])])]),t._v(" "),r("p",[t._v("AWSにおけるリソースの構成変更履歴を記録するサービスです。"),r("br"),t._v("\nAWSリソースに関する構成情報や変更履歴を記録し、任意の時点でのリソース設定の詳細な調査や、構成変更時の通知を受け取ることで、監査・セキュリティ分析・リソース変更の追跡・トラブルシューティングを可能にします。")]),t._v(" "),r("p",[t._v("詳細は以下を参照してください。")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://docs.aws.amazon.com/ja_jp/config/latest/developerguide/WhatIsConfig.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("「AWS Config ユーザーガイド」"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://aws.amazon.com/jp/config/pricing/",target:"_blank",rel:"noopener noreferrer"}},[t._v("「AWS Config 料金」"),r("OutboundLink")],1)])])])]),t._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",{staticClass:"custom-block-title"},[t._v("ATTENTION")]),t._v(" "),r("p",[t._v("プロジェクトアカウントでは、"),r("a",{attrs:{href:"/guide/aws/security#%E7%89%B9%E5%AE%9A%E3%81%AE%E6%93%8D%E4%BD%9C%E3%81%AB%E5%AF%BE%E3%81%99%E3%82%8B%E5%88%B6%E9%99%90"}},[t._v("セキュリティポリシー")]),t._v("により"),r("em",[t._v("AWS CloudTrail")]),t._v(" と "),r("em",[t._v("AWS Config")]),t._v("を無効にすることはできません。")])]),t._v(" "),r("h2",{attrs:{id:"ログ種別"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ログ種別"}},[t._v("#")]),t._v(" ログ種別")]),t._v(" "),r("p",[t._v("OrBITでは、以下の２種類の監査ログを記録します。")]),t._v(" "),r("ul",[r("li",[r("p",[t._v("操作ログ")]),t._v(" "),r("p",[t._v("操作ログは、マネジメントコンソールやAWS CLI経由で行われた全てのAPIを記録したログであり、"),r("em",[t._v("AWS CloudTrail")]),t._v("によって管理されます。")])]),t._v(" "),r("li",[r("p",[t._v("構成変更ログ")]),t._v(" "),r("p",[t._v("構成変更ログは、特定のリソースに対しての変更や削除の履歴を記録したログであり、"),r("em",[t._v("AWS Config")]),t._v("によって管理されます。")])])]),t._v(" "),r("h2",{attrs:{id:"アーキテクチャ"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#アーキテクチャ"}},[t._v("#")]),t._v(" アーキテクチャ")]),t._v(" "),r("p",[t._v("監査ログの記録、および収集する仕組みは、"),r("a",{attrs:{href:"/guide/aws/baseline#%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3"}},[t._v("「ベースラインのアーキテクチャ」")]),t._v("を参照してください。")]),t._v(" "),r("h2",{attrs:{id:"操作ログの確認と解析"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#操作ログの確認と解析"}},[t._v("#")]),t._v(" 操作ログの確認と解析")]),t._v(" "),r("p",[t._v("操作ログは、基本的にマネジメントコンソールから利用できる"),r("em",[t._v("AWS CloudTrail")]),t._v("コンソールにて確認します。"),r("br"),t._v("\n確認の手順については、以下のチュートリアルを参照して下さい。")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#aws-cloudtrail%E3%82%B3%E3%83%B3%E3%82%BD%E3%83%BC%E3%83%AB%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%A6%E6%93%8D%E4%BD%9C%E3%83%AD%E3%82%B0%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B"}},[t._v("「AWS CloudTrailコンソールを使用して操作ログを確認する」")])])]),t._v(" "),r("p",[t._v("また、操作ログは"),r("em",[t._v("CloudWatchLogs")]),t._v("へと転送する設定になっています。"),r("br"),t._v(" "),r("em",[t._v("CloudWatchLogs")]),t._v("では、"),r("em",[t._v("CloudWatchLogs Insight")]),t._v("という強力な解析ツールを使用することができます。"),r("br"),t._v("\n確認の手順については、以下のチュートリアルを参照して下さい。")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#cloudwatchlogs-insights%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%A6%E6%93%8D%E4%BD%9C%E3%83%AD%E3%82%B0%E3%82%92%E8%A7%A3%E6%9E%90%E3%81%99%E3%82%8B"}},[t._v("「CloudWatchLogs Insightsを使用して操作ログを解析する」")])])]),t._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",{staticClass:"custom-block-title"},[t._v("ATTENTION")]),t._v(" "),r("p",[r("em",[t._v("CloudTrail")]),t._v("のログはアクティビティが発生してから90日間保管されますが、"),r("em",[t._v("CloudWatchLogs")]),t._v("に転送されるログは14日間で失効します。")])]),t._v(" "),r("h2",{attrs:{id:"構成変更ログの確認と解析"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#構成変更ログの確認と解析"}},[t._v("#")]),t._v(" 構成変更ログの確認と解析")]),t._v(" "),r("p",[t._v("構成変更ログは、基本的にマネジメントコンソールから利用できる"),r("em",[t._v("AWS Config")]),t._v("コンソールにて確認・解析します。"),r("br"),t._v("\n確認・解析の手順については、以下のチュートリアルを参照して下さい。")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#config%E3%82%B3%E3%83%B3%E3%82%BD%E3%83%BC%E3%83%AB%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%A6%E6%A7%8B%E6%88%90%E5%A4%89%E6%9B%B4%E3%83%AD%E3%82%B0%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B"}},[t._v("「Configコンソールを使用して構成変更ログを確認する」")])]),t._v(" "),r("li",[r("a",{attrs:{href:"#config%E3%82%B3%E3%83%B3%E3%82%BD%E3%83%BC%E3%83%AB%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%A6%E6%A7%8B%E6%88%90%E5%A4%89%E6%9B%B4%E3%83%AD%E3%82%B0%E3%81%AE%E8%A9%B3%E7%B4%B0%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B"}},[t._v("「Configコンソールを使用して構成変更ログの詳細を確認する」")])])]),t._v(" "),r("h2",{attrs:{id:"ログの収集"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ログの収集"}},[t._v("#")]),t._v(" ログの収集")]),t._v(" "),r("p",[t._v("プロジェクトアカウントに記録された全ての監査ログは、OrBITコアシステムへと転送され、厳重に管理されます。")]),t._v(" "),r("h3",{attrs:{id:"管理ポリシー"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#管理ポリシー"}},[t._v("#")]),t._v(" 管理ポリシー")]),t._v(" "),r("hr"),t._v(" "),r("p",[t._v("各プロジェクトアカウントから収集したログは以下のポリシーにて管理されます。")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",{staticStyle:{"text-align":"center"}},[t._v("項目")]),t._v(" "),r("th",{staticStyle:{"text-align":"center"}},[t._v("設定")])])]),t._v(" "),r("tbody",[r("tr",[r("td",{staticStyle:{"text-align":"center"}},[t._v("公開範囲")]),t._v(" "),r("td",{staticStyle:{"text-align":"center"}},[t._v("OrBIT運用チームのみ閲覧可能")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[t._v("暗号化")]),t._v(" "),r("td",{staticStyle:{"text-align":"center"}},[t._v("有効(AES-256)")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[t._v("バージョニング")]),t._v(" "),r("td",{staticStyle:{"text-align":"center"}},[t._v("有効")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[t._v("ログファイルの検証")]),t._v(" "),r("td",{staticStyle:{"text-align":"center"}},[t._v("有効")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[t._v("アクセスログの記録")]),t._v(" "),r("td",{staticStyle:{"text-align":"center"}},[t._v("有効")])]),t._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[t._v("保管期間")]),t._v(" "),r("td",{staticStyle:{"text-align":"center"}},[t._v("365日")])])])]),t._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),r("p",[t._v("監査ログの保管に掛かる料金はOrBITにて負担しますが、保管期間は365日までとなっています。もし、これ以上の期間残しておく必要がある際はご連絡ください。")])]),t._v(" "),r("h3",{attrs:{id:"解析依頼"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#解析依頼"}},[t._v("#")]),t._v(" 解析依頼")]),t._v(" "),r("hr"),t._v(" "),r("p",[t._v("プロジェクトアカウントで記録していた監査ログが失効してしまった場合、"),r("a",{attrs:{href:"/request/analyze-auditlog"}},[t._v("「監査ログ確認申請フォーム」")]),t._v("から監査ログの解析依頼を申請できます。")]),t._v(" "),r("h2",{attrs:{id:"チュートリアル"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#チュートリアル"}},[t._v("#")]),t._v(" チュートリアル")]),t._v(" "),r("h3",{attrs:{id:"aws-cloudtrailコンソールを使用して操作ログを確認する"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#aws-cloudtrailコンソールを使用して操作ログを確認する"}},[t._v("#")]),t._v(" AWS CloudTrailコンソールを使用して操作ログを確認する")]),t._v(" "),r("p",[t._v("ここでは、操作ログを確認するために、マネジメントコンソールから利用可能な"),r("em",[t._v("AWS CloudTrail")]),t._v("コンソールを使った確認の仕方を紹介します。")]),t._v(" "),r("ol",[r("li",[r("p",[t._v("マネジメントコンソール にサインインし、"),r("a",{attrs:{href:"https://console.aws.amazon.com/cloudtrail/home/",target:"_blank",rel:"noopener noreferrer"}},[t._v("AWS CloudTrailコンソール"),r("OutboundLink")],1),t._v("を開きます。")])]),t._v(" "),r("li",[r("p",[t._v("最新のイベントに関するダッシュボードの情報を確認します。"),r("br"),t._v("\nこれらのイベントの1つは ConsoleSignin イベントである必要があり、これはマネジメントコンソール にサインインしたことを示しています。"),r("br"),t._v(" "),r("img",{attrs:{src:"https://docs.aws.amazon.com/ja_jp/awscloudtrail/latest/userguide/images/cloudtrail-dashboard.png",alt:""}})])]),t._v(" "),r("li",[r("p",[t._v("イベントの詳細を表示するには、これを展開します。"),r("br"),t._v(" "),r("img",{attrs:{src:"https://docs.aws.amazon.com/ja_jp/awscloudtrail/latest/userguide/images/cloudtrail-dashboard-expand-event.png",alt:""}})])]),t._v(" "),r("li",[r("p",[t._v("ナビゲーションペインで "),r("strong",[t._v("[Event history (イベント履歴)]")]),t._v(" を選択します。"),r("br"),t._v("\n最新のイベントが最初に表示された、フィルタリングされたイベントのリストが表示されます。イベントのデフォルトのフィルターは読み取り専用で、"),r("strong",[t._v("[false]")]),t._v(" に設定されています。削除アイコンを選択することで、このフィルターをクリアできます。"),r("br"),t._v(" "),r("img",{attrs:{src:"https://docs.aws.amazon.com/ja_jp/awscloudtrail/latest/userguide/images/cloudtrail-event-history.png",alt:""}})])]),t._v(" "),r("li",[r("p",[t._v("デフォルトのフィルターなしでさらに多くのイベントが表示されます。多くの方法でイベントをフィルタリングすることができます。たとえば、すべてのコンソールログインイベントを表示するには、"),r("strong",[t._v("[Event name (イベント名)]")]),t._v(" を選択して、"),r("strong",[t._v("[ConsoleLogin]")]),t._v(" を指定します。フィルターはユーザーが選択できます。"),r("br"),t._v(" "),r("img",{attrs:{src:"https://docs.aws.amazon.com/ja_jp/awscloudtrail/latest/userguide/images/cloudtrail-event-history-filters.png",alt:""}})])]),t._v(" "),r("li",[r("p",[t._v("イベント履歴を保存するには、CSVまたはJSON形式のファイルとしてダウンロードします。"),r("br"),t._v(" "),r("img",{attrs:{src:"https://docs.aws.amazon.com/ja_jp/awscloudtrail/latest/userguide/images/cloudtrail-event-history-download.png",alt:""}})])])]),t._v(" "),r("p",[t._v("これでこのチュートリアルは終了です。")]),t._v(" "),r("h3",{attrs:{id:"cloudwatchlogs-insightsを使用して操作ログを解析する"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#cloudwatchlogs-insightsを使用して操作ログを解析する"}},[t._v("#")]),t._v(" CloudWatchLogs Insightsを使用して操作ログを解析する")]),t._v(" "),r("p",[t._v("このチュートリアルについては、以下のサイトを参照してください。")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://dev.classmethod.jp/cloud/aws/analyze-cloudtrail-cloud-watch-logs-insights/",target:"_blank",rel:"noopener noreferrer"}},[t._v("「CloudWatch Logs Insights で監査ログの分析をしてみる」"),r("OutboundLink")],1)])]),t._v(" "),r("h3",{attrs:{id:"configコンソールを使用して構成変更ログを確認する"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#configコンソールを使用して構成変更ログを確認する"}},[t._v("#")]),t._v(" Configコンソールを使用して構成変更ログを確認する")]),t._v(" "),r("p",[t._v("このチュートリアルについては、以下のサイトを参照してください。")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://docs.aws.amazon.com/ja_jp/config/latest/developerguide/looking-up-discovered-resources.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("「AWS Configで検出されたリソースの検索」"),r("OutboundLink")],1)])]),t._v(" "),r("h3",{attrs:{id:"configコンソールを使用して構成変更ログの詳細を確認する"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#configコンソールを使用して構成変更ログの詳細を確認する"}},[t._v("#")]),t._v(" Configコンソールを使用して構成変更ログの詳細を確認する")]),t._v(" "),r("p",[t._v("このチュートリアルについては、以下のサイトを参照してください。")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://docs.aws.amazon.com/ja_jp/config/latest/developerguide/view-manage-resource-console.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("「AWS Configで検出されたリソースの設定詳細の表示」"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=s.exports}}]);